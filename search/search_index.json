{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Talk2Metadata","text":"<p>Talk to your metadata</p> <p>Talk2Metadata is an end-to-end system for semantic search over structured metadata. The system:</p> <ol> <li>Takes input: A target table and related FK tables (CSV files or databases)</li> <li>Detects schema: Automatically identifies star schema structure</li> <li>Generates QA: Creates evaluation questions based on difficulty classification</li> <li>Evaluates strategies: Tests different indexing and retrieval approaches</li> <li>Finds best solution: Selects optimal strategy based on evaluation results</li> </ol>"},{"location":"#context-example","title":"Context Example","text":"<p>Given metadata with a star schema structure:</p> <p>Target table: <code>orders</code></p> <pre><code>| id  | customer_id | product_id | amount | status    |\n| --- | ----------- | ---------- | ------ | --------- |\n| 1   | 1           | 101        | 50000  | completed |\n| 2   | 2           | 102        | 30000  | pending   |\n</code></pre> <p>Related FK tables: <code>customers</code>, <code>products</code></p> <pre><code>customers:          products:\n| id  | name | industry    id | name | category |\n| --- | ---- | -------------- | ---- | -------- ||\n| 1   | Acme     | Healthcare  101 | Analytics | Software |\n| 2   | TechCorp | Technology  102 | Platform  | Software |\n</code></pre> <p>The system detects <code>orders.customer_id -&gt; customers.id</code> and <code>orders.product_id -&gt; products.id</code>, then enables queries like \"Find orders from Healthcare customers buying Software products\".</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Automatic star schema detection</li> <li>QA generation with difficulty classification</li> <li>Multiple retrieval strategies</li> <li>Automatic evaluation and optimization</li> </ul>"},{"location":"#example","title":"Example","text":"<p>Given metadata with a target table <code>orders</code> and related tables <code>customers</code> and <code>products</code>:</p> <pre><code># 1. Detect schema (finds: orders -&gt; customers, orders -&gt; products)\ntalk2metadata schema ingest csv data/raw --target orders\n\n# 2. Generate QA pairs (e.g., \"Find orders from Healthcare customers\")\ntalk2metadata search prepare\n\n\n# 3. Evaluate\ntalk2metadata search evaluate\n\n# 3. or directly search\ntalk2metadata search \"orders from healthcare customers buying software\"\n</code></pre>"},{"location":"#core-modules","title":"Core Modules","text":""},{"location":"#schema-detection","title":"\ud83d\udd17 Schema Detection","text":"<p>Automatically detect foreign key relationships and understand database structure.</p>"},{"location":"#retriever","title":"\ud83d\ude80 Retriever","text":"<p>Index and search database records semantically with hybrid search support.</p>"},{"location":"#qa-generation","title":"\ud83c\udfaf QA Generation","text":"<p>Generate training data for record localization with multi-level difficulty.</p>"},{"location":"#getting-started","title":"Getting Started","text":"<ul> <li>Installation Guide</li> <li>Quick Start Tutorial</li> </ul>"},{"location":"#advanced-features","title":"Advanced Features","text":"<ul> <li>MCP Server Quick Start</li> <li>Utilities &amp; Tools</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11 or 3.12</li> <li>4GB RAM minimum</li> </ul>"},{"location":"getting-started/installation/#quick-setup-recommended","title":"Quick Setup (Recommended)","text":"<p>Unix/macOS/Linux/WSL:</p> <pre><code># Clone repository\ngit clone https://github.com/PascalSun/Talk2Metadata.git\ncd Talk2Metadata\n\n# Run setup script\n./setup.sh          # Basic installation\n./setup.sh --mcp    # With MCP server support\n\n# Activate environment\nsource .venv/bin/activate\n</code></pre> <p>Windows:</p> <pre><code># Clone repository\ngit clone https://github.com/PascalSun/Talk2Metadata.git\ncd Talk2Metadata\n\n# Run setup script\nsetup.bat          # Basic installation\nsetup.bat --mcp    # With MCP server support\n\n# Activate environment\n.venv\\Scripts\\activate.bat\n</code></pre> <p>The setup script automatically: - \u2705 Checks Python version (3.11+) - \u2705 Installs uv package manager - \u2705 Creates virtual environment - \u2705 Installs Talk2Metadata with dependencies - \u2705 Creates project directories (data, logs, examples) - \u2705 Copies configuration templates</p>"},{"location":"getting-started/installation/#manual-installation","title":"Manual Installation","text":"<p>If you prefer manual installation:</p> <pre><code># Install uv if you don't have it\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Clone repository\ngit clone https://github.com/PascalSun/Talk2Metadata.git\ncd Talk2Metadata\n\n# Create virtual environment\nuv venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate.bat\n\n# Install dependencies\nuv sync\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code># Check CLI is available\ntalk2metadata --version\n\n# Or with uv\nuv run talk2metadata --version\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Tutorial</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>This guide will get you up and running with Talk2Metadata in 5 minutes.</p>"},{"location":"getting-started/quickstart/#step-1-install-talk2metadata","title":"Step 1: Install Talk2Metadata","text":"<pre><code># Clone repository\ngit clone https://github.com/PascalSun/Talk2Metadata.git\ncd Talk2Metadata\n\n# Run setup script\n./setup.sh\n\n# Activate environment\nsource .venv/bin/activate\n</code></pre> <p>The setup script will: - Check Python version (3.11+) - Install uv package manager if needed - Create virtual environment - Install Talk2Metadata and dependencies - Create project directories - Set up configuration files</p>"},{"location":"getting-started/quickstart/#step-2-ingest-data","title":"Step 2: Ingest Data","text":"<pre><code>talk2metadata schema ingest csv data/raw --target orders\n</code></pre> <p>This command: - Loads all CSV files from <code>data/raw/</code> - Detects foreign key relationships automatically - Marks <code>orders</code> as the target table - Saves metadata to <code>data/metadata/schema.json</code></p>"},{"location":"getting-started/quickstart/#step-3-generate-qa-pairs-optional","title":"Step 3: Generate QA Pairs (Optional)","text":"<pre><code>talk2metadata qa generate\n</code></pre> <p>This generates evaluation questions based on difficulty classification for testing retrieval strategies.</p>"},{"location":"getting-started/quickstart/#step-4-build-search-index","title":"Step 4: Build Search Index","text":"<pre><code>talk2metadata search prepare\n</code></pre> <p>This command: - Loads the target table (<code>orders</code>) - Joins related tables using detected FKs - Creates denormalized text for each row - Generates embeddings using sentence-transformers - Builds FAISS index for fast search - Includes BM25 index for hybrid search</p>"},{"location":"getting-started/quickstart/#step-5-evaluate-strategies-optional","title":"Step 5: Evaluate Strategies (Optional)","text":"<pre><code>talk2metadata search evaluate\n</code></pre> <p>This evaluates different retrieval strategies and finds the best solution.</p>"},{"location":"getting-started/quickstart/#step-6-search-for-records","title":"Step 6: Search for Records","text":"<pre><code># Find healthcare customers\ntalk2metadata search \"orders from healthcare customers buying software\"\n</code></pre>"},{"location":"mcp/implementation/","title":"MCP Server Implementation","text":"<p>Technical documentation for the Talk2Metadata MCP server.</p>"},{"location":"mcp/implementation/#architecture","title":"Architecture","text":"<pre><code>talk2metadata/mcp/\n\u251c\u2500\u2500 server.py                # Main MCP server with OAuth\n\u251c\u2500\u2500 config.py                # Configuration management\n\u251c\u2500\u2500 cli.py                   # CLI interface\n\u251c\u2500\u2500 auth/                    # Authentication\n\u2502   \u251c\u2500\u2500 oidc_client.py       # OIDC resource server\n\u2502   \u2514\u2500\u2500 oauth_proxy.py       # OAuth proxy endpoints\n\u251c\u2500\u2500 tools/                   # MCP tools\n\u2502   \u251c\u2500\u2500 search.py            # Semantic/hybrid search\n\u2502   \u251c\u2500\u2500 list_tables.py       # List tables\n\u2502   \u251c\u2500\u2500 get_schema.py        # Schema metadata\n\u2502   \u2514\u2500\u2500 get_table_info.py    # Table details\n\u251c\u2500\u2500 resources/               # MCP resources\n\u2514\u2500\u2500 prompts/                 # MCP prompts\n</code></pre>"},{"location":"mcp/implementation/#components","title":"Components","text":""},{"location":"mcp/implementation/#server","title":"Server","text":"<p>Main MCP server with OAuth 2.0 integration:</p> <ul> <li>StreamableHTTP transport (MCP protocol 2025-03-26)</li> <li>JWT authentication middleware</li> <li>CORS support</li> <li>Health and metadata endpoints</li> </ul>"},{"location":"mcp/implementation/#tools","title":"Tools","text":"<p>MCP tools implement callable functions:</p> <ul> <li>search: Semantic/hybrid search</li> <li>list_tables: List all tables</li> <li>get_schema: Complete schema with FKs</li> <li>get_table_info: Table details</li> </ul>"},{"location":"mcp/implementation/#authentication","title":"Authentication","text":"<p>OAuth 2.0 / OIDC support:</p> <ul> <li>Token introspection (RFC 7662)</li> <li>JWT validation using JWKS</li> <li>User info endpoint</li> </ul>"},{"location":"mcp/implementation/#configuration","title":"Configuration","text":"<p>Three-tier configuration:</p> <ol> <li>CLI arguments (highest priority)</li> <li>Environment variables</li> <li>YAML config file</li> <li>Defaults (lowest priority)</li> </ol>"},{"location":"mcp/integration/","title":"MCP Server Integration","text":"<p>Expose Talk2Metadata functionality to AI agents via Model Context Protocol.</p>"},{"location":"mcp/integration/#overview","title":"Overview","text":"<p>The Talk2Metadata MCP server provides: - Semantic Search: Natural language queries across multi-table data - Hybrid Search: BM25 + semantic for optimal results - Schema Exploration: Discover tables, columns, and foreign keys - OAuth 2.0 Security: Secure access with OIDC authentication</p>"},{"location":"mcp/integration/#quick-start","title":"Quick Start","text":"<pre><code># Install with MCP support\n./setup.sh --mcp\n\n# Prepare data\ntalk2metadata schema ingest csv ./data/raw --target orders\ntalk2metadata search prepare\n\n# Start server\ntalk2metadata-mcp sse --host 0.0.0.0 --port 8010\n</code></pre>"},{"location":"mcp/integration/#configuration","title":"Configuration","text":"<p>Create <code>config.mcp.yml</code>:</p> <pre><code>server:\n  host: 0.0.0.0\n  port: 8010\n  base_url: http://localhost:8010\n\noauth:\n  discovery_url: http://localhost:8000/o/.well-known/openid-configuration\n  client_id: your-client-id\n  client_secret: your-secret\n</code></pre>"},{"location":"mcp/integration/#available-tools","title":"Available Tools","text":""},{"location":"mcp/integration/#search","title":"search","text":"<p>Search across all tables using natural language:</p> <pre><code>{\n  \"query\": \"customers in healthcare industry\",\n  \"top_k\": 10,\n  \"hybrid\": true\n}\n</code></pre>"},{"location":"mcp/integration/#list_tables","title":"list_tables","text":"<p>Get all available tables:</p> <pre><code>{}\n</code></pre>"},{"location":"mcp/integration/#get_schema","title":"get_schema","text":"<p>Get complete schema with foreign key relationships:</p> <pre><code>{}\n</code></pre>"},{"location":"mcp/integration/#get_table_info","title":"get_table_info","text":"<p>Get detailed information about a specific table:</p> <pre><code>{\n  \"table_name\": \"orders\"\n}\n</code></pre>"},{"location":"mcp/integration/#client-integration","title":"Client Integration","text":""},{"location":"mcp/integration/#claude-desktop","title":"Claude Desktop","text":"<p>Add to <code>claude_desktop_config.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"talk2metadata\": {\n      \"url\": \"http://localhost:8010/mcp\",\n      \"authorization\": \"Bearer YOUR_TOKEN_HERE\"\n    }\n  }\n}\n</code></pre>"},{"location":"mcp/quickstart/","title":"MCP Server Quick Start","text":""},{"location":"mcp/quickstart/#installation","title":"Installation","text":"<pre><code># Install with MCP support\n./setup.sh --mcp\n# or\npip install -e \".[mcp]\"\n</code></pre>"},{"location":"mcp/quickstart/#prepare-data","title":"Prepare Data","text":"<pre><code># Ingest CSV files\ntalk2metadata schema ingest csv ./data/raw --target orders\n\n# Prepare modes (builds indexes or loads databases)\ntalk2metadata search prepare\n</code></pre>"},{"location":"mcp/quickstart/#start-server","title":"Start Server","text":"<pre><code># Copy and edit configuration\ncp config.mcp.example.yml config.mcp.yml\n\n# Start server\ntalk2metadata-mcp sse\n</code></pre> <p>Server runs at <code>http://localhost:8010</code>.</p>"},{"location":"mcp/quickstart/#configuration","title":"Configuration","text":"<p>Edit <code>config.mcp.yml</code>:</p> <pre><code>server:\n  host: 0.0.0.0\n  port: 8010\n\noauth:\n  discovery_url: http://localhost:8000/o/.well-known/openid-configuration\n  client_id: talk2metadata-mcp-client\n  client_secret: your-secret-here\n</code></pre>"},{"location":"mcp/quickstart/#available-tools","title":"Available Tools","text":"<ol> <li>search - Natural language search across all tables</li> <li>list_tables - List all available tables</li> <li>get_schema - Get complete schema with foreign keys</li> <li>get_table_info - Get details about a specific table</li> </ol>"},{"location":"mcp/quickstart/#testing","title":"Testing","text":"<pre><code># Health check\ncurl http://localhost:8010/health\n\n# Test with MCP Inspector\nnpx @modelcontextprotocol/inspector http://localhost:8010\n</code></pre>"},{"location":"qa/","title":"QA Generation","text":""},{"location":"qa/#overview","title":"Overview","text":"<p>The QA (Question-Answer) Generation module creates synthetic question-answer pairs for training and evaluating record localization systems. Each QA pair consists of:</p> <ol> <li>Natural language question: Human-readable query</li> <li>SQL answer: Executable SQL query to retrieve records</li> <li>Ground truth records: Expected result set from the database</li> </ol>"},{"location":"qa/#key-features","title":"Key Features","text":"<ul> <li>Multi-level difficulty: Generate questions from Easy (0E) to Expert (4iH)</li> <li>Schema-aware: Leverages detected foreign key relationships</li> <li>Diverse patterns: Supports both chain (path) and star (intersection) queries</li> <li>Controllable generation: Configure difficulty distribution and question types</li> </ul>"},{"location":"qa/#difficulty-classification","title":"Difficulty Classification","text":"<p>Format: <code>{Pattern}{Difficulty}</code></p> <ul> <li>Pattern: JOIN structure (0, 1p, 2p, 2i, 3p, 3i, 4i)</li> <li>Difficulty: Filter complexity (E, M, H)</li> </ul>"},{"location":"qa/#examples","title":"Examples","text":"<ul> <li><code>0E</code>: Direct query, Easy - \"Find completed orders\"</li> <li><code>1pM</code>: Single-hop path, Medium - \"Find orders from Healthcare customers with revenue&gt;1M\"</li> <li><code>2iE</code>: Two-way star, Easy - \"Find orders: Healthcare customers \u00d7 Software products\"</li> </ul> <p>See Difficulty Classification for complete specification.</p>"},{"location":"qa/#usage","title":"Usage","text":""},{"location":"qa/#basic-qa-generation","title":"Basic QA Generation","text":"<pre><code>from talk2metadata.qa import QAGenerator\nfrom talk2metadata.core.schema import SchemaDetector\n\n# Load and detect schema\nschema = SchemaDetector(tables, target_table=\"orders\").detect()\n\n# Initialize QA generator\nqa_gen = QAGenerator(schema=schema)\n\n# Generate questions at specific difficulty\nquestions = qa_gen.generate(\n    difficulty=\"2iE\",\n    num_questions=10\n)\n</code></pre>"},{"location":"qa/#batch-generation","title":"Batch Generation","text":"<pre><code># Generate balanced dataset\ndistribution = {\n    \"0E\": 50,\n    \"1pE\": 100,\n    \"1pM\": 80,\n    \"2iE\": 30,\n}\n\nqa_pairs = qa_gen.generate_batch(distribution)\nqa_gen.save(qa_pairs, \"qa_dataset.jsonl\")\n</code></pre>"},{"location":"qa/difficulty-classification/","title":"QA Difficulty Classification System","text":""},{"location":"qa/difficulty-classification/#overview","title":"Overview","text":"<p>This document defines the difficulty classification system for question-answer (QA) pair generation in Talk2Metadata. The system is designed specifically for record localization tasks, where the goal is to locate records in a target table by filtering through related tables via JOIN operations.</p>"},{"location":"qa/difficulty-classification/#design-goals","title":"Design Goals","text":"<ol> <li>Quantifiable: Each difficulty level corresponds to a clear numeric score</li> <li>Intuitive: Encoding format is human-readable and self-explanatory</li> <li>Comprehensive: Covers simple to expert-level queries</li> <li>Theoretically Grounded: Based on Query Graph frameworks from Knowledge Graph research</li> <li>Practical: Directly applicable to relational database schema and SQL generation</li> </ol>"},{"location":"qa/difficulty-classification/#visual-overview","title":"Visual Overview","text":"<p>The following interactive visualization displays all 7 core query patterns (0, 1p, 2p, 2i, 3p, 3i, 4i) with:</p> <ul> <li>Pattern codes and base scores</li> <li>Complexity tiers (Easy, Medium, Hard, Expert)</li> <li>Structural diagrams showing JOIN relationships</li> <li>Concentric circle visualizations for path queries</li> <li>Star pattern diagrams for intersection queries</li> </ul> Pattern Code Base Score Complexity Tier Description Structure Diagram"},{"location":"qa/difficulty-classification/#format-specification","title":"Format Specification","text":""},{"location":"qa/difficulty-classification/#encoding-format","title":"Encoding Format","text":"<pre><code>{Pattern}{Difficulty}\n</code></pre> <ul> <li>Pattern: Describes the JOIN structure (e.g., <code>0</code>, <code>1p</code>, <code>2i</code>)</li> <li>Difficulty: Describes the filter complexity (e.g., <code>E</code>, <code>M</code>, <code>H</code>)</li> </ul>"},{"location":"qa/difficulty-classification/#examples","title":"Examples","text":"<ul> <li><code>0E</code>: Direct query, Easy</li> <li><code>1pM</code>: Single-hop path, Medium</li> <li><code>2iE</code>: Two-way intersection, Easy</li> <li><code>2iH</code>: Two-way intersection, Hard</li> <li><code>3iM</code>: Three-way intersection, Medium</li> </ul>"},{"location":"qa/difficulty-classification/#pattern-types","title":"Pattern Types","text":"<p>Pattern types describe the JOIN structure of the query, inspired by Query Graph notation from Knowledge Graph QA research.</p>"},{"location":"qa/difficulty-classification/#pattern-notation","title":"Pattern Notation","text":"Code Name Description JOIN Type Example <code>0</code> Direct No JOIN, query only target table None Find orders with status='completed' <code>1p</code> Single-hop Path 1 JOIN in a chain Chain Find orders from Healthcare customers <code>2p</code> Two-hop Path 2 JOINs in a chain Chain Find orders from US-West region customers <code>3p</code> Three-hop Path 3 JOINs in a chain Chain Orders \u2192 Customers \u2192 Regions \u2192 Countries <code>2i</code> Two-way Intersection 2 JOINs in a star Star Find orders: Healthcare customers \u00d7 Software products <code>3i</code> Three-way Intersection 3 JOINs in a star Star Orders: Healthcare customers \u00d7 Software products \u00d7 Senior sales <code>4i</code> Four-way Intersection 4 JOINs in a star Star Orders with 4 independent filter dimensions"},{"location":"qa/difficulty-classification/#difficulty-levels","title":"Difficulty Levels","text":"<p>Difficulty levels describe the filter complexity based on the number of distinct columns used in filter conditions.</p>"},{"location":"qa/difficulty-classification/#difficulty-notation","title":"Difficulty Notation","text":"Code Name Column Count Description <code>E</code> Easy 1-2 columns Simple, single-condition or dual-condition filters <code>M</code> Medium 3-5 columns Multiple filter conditions across tables <code>H</code> Hard 6+ columns Complex multi-dimensional filtering"},{"location":"qa/difficulty-classification/#complete-difficulty-matrix","title":"Complete Difficulty Matrix","text":""},{"location":"qa/difficulty-classification/#difficulty-codes-and-scores","title":"Difficulty Codes and Scores","text":"Code Pattern Difficulty Score Tier Description 0E Direct Easy 0.0 Easy Direct filter, 1-2 columns 0M Direct Medium 0.3 Easy Direct filter, 3-5 columns 0H Direct Hard 0.6 Easy Direct filter, 6+ columns 1pE 1-hop Path Easy 1.0 Medium Single JOIN, simple filter 1pM 1-hop Path Medium 1.3 Medium Single JOIN, medium filter 1pH 1-hop Path Hard 1.6 Medium Single JOIN, complex filter 2pE 2-hop Path Easy 2.0 Hard 2-hop chain, simple 2pM 2-hop Path Medium 2.3 Hard 2-hop chain, medium 2pH 2-hop Path Hard 2.6 Hard 2-hop chain, complex 2iE 2-way Star Easy 2.0 Hard 2-way intersection, simple 2iM 2-way Star Medium 2.3 Hard 2-way intersection, medium 2iH 2-way Star Hard 2.6 Hard 2-way intersection, complex 3pE 3-hop Path Easy 3.0 Expert 3-hop chain, simple 3pM 3-hop Path Medium 3.3 Expert 3-hop chain, medium 3pH 3-hop Path Hard 3.6 Expert 3-hop chain, complex 3iE 3-way Star Easy 3.0 Expert 3-way intersection, simple 3iM 3-way Star Medium 3.3 Expert 3-way intersection, medium 3iH 3-way Star Hard 3.6 Expert 3-way intersection, complex 4iE 4-way Star Easy 4.0 Expert 4-way intersection, simple 4iM 4-way Star Medium 4.3 Expert 4-way intersection, medium 4iH 4-way Star Hard 4.6 Expert 4-way intersection, complex"},{"location":"qa/difficulty-classification/#tier-boundaries","title":"Tier Boundaries","text":"<ul> <li>Easy Tier: Score 0.0 - 0.9 (0E, 0M, 0H)</li> <li>Medium Tier: Score 1.0 - 1.9 (1pE, 1pM, 1pH)</li> <li>Hard Tier: Score 2.0 - 2.9 (2pE, 2pM, 2pH, 2iE, 2iM, 2iH)</li> <li>Expert Tier: Score 3.0+ (3p, 3i, 4i, Xm)</li> </ul>"},{"location":"qa/difficulty-classification/#examples_1","title":"Examples","text":""},{"location":"qa/difficulty-classification/#0e-score-00","title":"0E (Score: 0.0)","text":"<ul> <li>Question: \"Find all completed orders\"</li> <li>SQL: <code>SELECT * FROM orders WHERE status = 'completed'</code></li> </ul>"},{"location":"qa/difficulty-classification/#1pe-score-10","title":"1pE (Score: 1.0)","text":"<ul> <li>Question: \"Find all orders from Healthcare industry customers\"</li> <li>SQL: <code>SELECT o.* FROM orders o JOIN customers c ON o.customer_id = c.id WHERE c.industry = 'Healthcare'</code></li> </ul>"},{"location":"qa/difficulty-classification/#2ie-score-20","title":"2iE (Score: 2.0)","text":"<ul> <li>Question: \"Find orders from Healthcare customers buying Software products\"</li> <li>SQL: <code>SELECT o.* FROM orders o JOIN customers c ON o.customer_id = c.id JOIN products p ON o.product_id = p.id WHERE c.industry = 'Healthcare' AND p.category = 'Software'</code></li> </ul>"},{"location":"retriever/","title":"Retriever","text":""},{"location":"retriever/#overview","title":"Overview","text":"<p>The Retriever module indexes database records and retrieves them based on natural language queries. It bridges the gap between user questions and actual database records through semantic search.</p>"},{"location":"retriever/#key-features","title":"Key Features","text":"<ul> <li>Semantic Indexing: Convert database records into searchable embeddings</li> <li>Hybrid Retrieval: Combine semantic search (vector similarity) with keyword search (BM25)</li> <li>Schema-Aware: Leverage foreign key relationships for denormalized indexing</li> <li>Efficient Search: FAISS-based vector indexing for fast similarity search</li> </ul>"},{"location":"retriever/#architecture","title":"Architecture","text":"<pre><code>Indexing Phase:\n1. Schema Detection \u2192 Identify target table and foreign keys\n2. Denormalization \u2192 Join related tables, create rich text representations\n3. Embedding &amp; Indexing \u2192 Generate embeddings, build FAISS index\n\nQuery Phase:\n1. Query Understanding \u2192 Parse natural language, generate query embedding\n2. Retrieval \u2192 Semantic search (vector similarity) or hybrid (BM25 + semantic)\n3. Ranking \u2192 Return top-k results\n</code></pre>"},{"location":"retriever/#usage","title":"Usage","text":""},{"location":"retriever/#indexing","title":"Indexing","text":"<pre><code>from talk2metadata.core.indexer import Indexer\nfrom talk2metadata.core.schema import SchemaDetector\n\n# Detect schema\nschema = SchemaDetector(tables, target_table=\"orders\").detect()\n\n# Create indexer\nindexer = Indexer(\n    schema=schema,\n    embedding_model=\"all-MiniLM-L6-v2\"\n)\n\n# Index all records\nindexer.index()\nindexer.save(\"orders_index\")\n</code></pre>"},{"location":"retriever/#retrieval","title":"Retrieval","text":"<pre><code>from talk2metadata.core.retriever import Retriever\n\n# Load index\nretriever = Retriever.load(\"orders_index\")\n\n# Search\nresults = retriever.search(\n    query=\"Find orders from Healthcare customers\",\n    top_k=10\n)\n\nfor result in results:\n    print(f\"Score: {result.score:.3f}\")\n    print(f\"Record: {result.record}\")\n</code></pre>"},{"location":"retriever/#retrieval-strategies","title":"Retrieval Strategies","text":""},{"location":"retriever/#semantic-search-default","title":"Semantic Search (Default)","text":"<p>Uses embedding similarity:</p> <pre><code>results = retriever.search(\n    query=\"healthcare customers\",\n    top_k=10\n)\n</code></pre>"},{"location":"retriever/#hybrid-search","title":"Hybrid Search","text":"<p>Combines semantic and keyword search:</p> <pre><code>results = retriever.search(\n    query=\"healthcare customers\",\n    strategy=\"hybrid\",\n    top_k=10\n)\n</code></pre>"},{"location":"retriever/#configuration","title":"Configuration","text":"<pre><code>retriever:\n  strategy: \"hybrid\"  # \"semantic\", \"bm25\", or \"hybrid\"\n  top_k: 5\n  min_score: 0.5\n</code></pre>"},{"location":"schema/","title":"Schema Detection","text":""},{"location":"schema/#overview","title":"Overview","text":"<p>The Schema module detects and understands the structure of relational databases, including:</p> <ul> <li>Foreign Key Detection: Automatically identify relationships between tables</li> <li>Primary Key Inference: Detect primary keys when not explicitly defined</li> <li>Schema Metadata: Extract and store comprehensive table and column information</li> </ul>"},{"location":"schema/#key-components","title":"Key Components","text":""},{"location":"schema/#foreign-key-detection","title":"Foreign Key Detection","text":"<p>Talk2Metadata uses a hybrid approach:</p>"},{"location":"schema/#rule-based-detection","title":"Rule-Based Detection","text":"<p>Heuristic methods that identify foreign keys through:</p> <ul> <li>Naming patterns: Columns ending with <code>_id</code>, <code>_key</code>, or matching table names</li> <li>Inclusion dependencies: Child table values are subset of parent table values</li> <li>Coverage thresholds: Configurable minimum coverage (default: 90%)</li> </ul>"},{"location":"schema/#agent-based-detection","title":"Agent-Based Detection","text":"<p>LLM-powered detection for complex relationships:</p> <ul> <li>Semantic analysis: Understanding column name meanings</li> <li>Value pattern recognition: Identifying non-obvious relationships</li> </ul>"},{"location":"schema/#usage","title":"Usage","text":""},{"location":"schema/#csv-file-analysis","title":"CSV File Analysis","text":"<pre><code>from talk2metadata.connectors import CSVLoader\nfrom talk2metadata.core.schema import SchemaDetector\n\n# Load CSV files\nloader = CSVLoader(data_dir=\"./data\")\ntables = loader.load()\n\n# Detect schema\ndetector = SchemaDetector(tables, target_table=\"orders\")\nschema = detector.detect()\n\nprint(f\"Detected {len(schema.foreign_keys)} foreign keys\")\n</code></pre>"},{"location":"schema/#database-connection","title":"Database Connection","text":"<pre><code>from talk2metadata.connectors import DBConnector\nfrom talk2metadata.core.schema import SchemaDetector\n\n# Connect to database\nconnector = DBConnector(\n    db_type=\"postgresql\",\n    host=\"localhost\",\n    database=\"sales_db\"\n)\ntables = connector.load()\n\n# Detect schema\ndetector = SchemaDetector(tables)\nschema = detector.detect()\n</code></pre>"},{"location":"schema/#configuration","title":"Configuration","text":"<pre><code>schema:\n  fk_detection:\n    method: \"hybrid\"  # \"rule_based\", \"agent_based\", or \"hybrid\"\n    coverage_threshold: 0.9\n</code></pre>"},{"location":"utils/","title":"Utilities","text":"<p>Documentation for utility modules in <code>src/talk2metadata/utils/</code>.</p>"},{"location":"utils/#configuration-configpy","title":"Configuration (<code>config.py</code>)","text":"<p>Configuration management with YAML support:</p> <pre><code>from talk2metadata.utils.config import get_config, load_config\n\n# Get global config (loads from config.yml or uses defaults)\nconfig = get_config()\n\n# Access nested config values\nmodel = config.get(\"embedding.model_name\")\ntop_k = config.get(\"retrieval.top_k\", 5)  # with default\n\n# Load custom config\nconfig = load_config(\"path/to/config.yml\")\n</code></pre>"},{"location":"utils/#logging-loggingpy","title":"Logging (<code>logging.py</code>)","text":"<p>Structured logging setup:</p> <pre><code>from talk2metadata.utils.logging import setup_logging, get_logger\n\n# Setup logging\nsetup_logging(level=\"INFO\", log_file=\"logs/app.log\")\n\n# Get logger for module\nlogger = get_logger(__name__)\nlogger.info(\"Starting process\")\nlogger.debug(\"Debug details\")\n</code></pre>"},{"location":"utils/#paths-pathspy","title":"Paths (<code>paths.py</code>)","text":"<p>Path utilities with run_id support:</p> <pre><code>from talk2metadata.utils.paths import (\n    get_metadata_dir,\n    get_processed_dir,\n    get_indexes_dir,\n    get_qa_dir,\n    get_benchmark_dir,\n    get_db_dir,\n    find_schema_file,\n)\n\n# Get directories (supports run_id)\nmetadata_dir = get_metadata_dir(run_id=\"wamex_run\")\nindexes_dir = get_indexes_dir(run_id=\"wamex_run\")\n\n# Find schema file\nschema_path = find_schema_file(metadata_dir, target_table=\"orders\")\n</code></pre>"},{"location":"utils/#timing-timingpy","title":"Timing (<code>timing.py</code>)","text":"<p>Performance timing utilities:</p> <pre><code>from talk2metadata.utils.timing import timed, TimingContext, get_latency_tracker\n\n# Decorator for function timing\n@timed(\"my_function\")\ndef process_data():\n    pass\n\n# Context manager for block timing\nwith TimingContext(\"indexing\"):\n    # ... do work\n    pass\n\n# Get timing statistics\ntracker = get_latency_tracker()\nstats = tracker.get_stats(\"indexing\")\nprint(f\"Mean: {stats.mean_ms}ms, P95: {stats.p95_ms}ms\")\n</code></pre>"},{"location":"utils/#metrics-metricspy","title":"Metrics (<code>metrics.py</code>)","text":"<p>Metrics collection and export:</p> <pre><code>from talk2metadata.utils.metrics import get_metrics_collector\n\ncollector = get_metrics_collector()\nsnapshot = collector.get_snapshot()\n\n# Export as JSON\nprint(snapshot.to_dict())\n</code></pre>"},{"location":"utils/#csv-to-database-csv_to_dbpy","title":"CSV to Database (<code>csv_to_db.py</code>)","text":"<p>Convert CSV files to SQLite database:</p> <pre><code>from talk2metadata.utils.csv_to_db import create_sqlite_from_csv\nfrom pathlib import Path\n\n# Create SQLite database from CSV files\ndb_path = create_sqlite_from_csv(\n    csv_data_dir=Path(\"data/raw\"),\n    run_id=\"wamex_run\",\n    schema_metadata=schema  # Optional: adds FK constraints\n)\n</code></pre>"},{"location":"utils/monitoring/","title":"Performance Monitoring","text":"<p>Performance monitoring and benchmarking tools for Talk2Metadata.</p>"},{"location":"utils/monitoring/#timing-utilities","title":"Timing Utilities","text":"<p>Use timing decorators and context managers to track performance:</p> <pre><code>from talk2metadata.utils.timing import timed, TimingContext\n\n# Function timing\n@timed(\"search_operation\")\ndef search(query: str):\n    # ... search logic\n    pass\n\n# Block timing\nwith TimingContext(\"indexing\"):\n    # ... indexing logic\n    pass\n</code></pre>"},{"location":"utils/monitoring/#metrics-collection","title":"Metrics Collection","text":"<p>Collect and export metrics:</p> <pre><code>from talk2metadata.utils.metrics import get_metrics_collector\n\ncollector = get_metrics_collector()\nsnapshot = collector.get_snapshot()\n\n# Get statistics\nprint(f\"Total requests: {snapshot.total_requests}\")\nprint(f\"Error rate: {snapshot.error_rate:.2%}\")\nprint(f\"Latency stats: {snapshot.latency_stats}\")\n</code></pre>"},{"location":"utils/monitoring/#mcp-server-metrics","title":"MCP Server Metrics","text":"<p>When the MCP server is running, access metrics via HTTP:</p> <pre><code># JSON metrics\ncurl http://localhost:8010/metrics\n\n# Prometheus format\ncurl http://localhost:8010/metrics/prometheus\n</code></pre>"},{"location":"utils/monitoring/#performance-targets","title":"Performance Targets","text":"Metric Target P95 Latency &lt; 100ms P99 Latency &lt; 200ms Cold Start &lt; 3s"}]}